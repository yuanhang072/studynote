# 软件复杂度来源

## 高性能

高性能是什么？

> 性能是软件的一个重要质量属性。衡量软件性能包括了响应时间、TPS、服务器资源利用率等
> 客观指标，也可以是用户的主观感受.

为什么需要高性能？

> 追求良好的用户体验；满足业务增长的需要。

如何做好高性能

> 可以从垂直与水平两个维度来考虑。
>
> 垂直维度主要是针对单台计算机，通过升级软、硬件能力实现性能提升；
>
> 水平维度则主要针对集群系统，利用合理的任务分配与任务分解实现性能的提升。

高性能体现在两个方面：

- 单台计算机内部为了高性能带来的复杂度

  进程和线程：需要考虑（多进程、多线程、进程间通信、多线程并发等）[**进程资料**](http://concurrent.redspider.group/article/01/2.html)

  ~~~xml
  Nginx 可以用多进程也可以用多线程，
  JBoss 采用的是多线程；
  Redis 采用的是单进程，
  Memcache 采用的是多线程，
  这些系统都实现了高性能，但内部实现差异却很大。
  ~~~

- 多台计算机集群为了高性能带来的复杂度

  任务分配方式：指每台机器都可以处理完整的业务任务，不同的任务分配到不同的机器上执行。

  ~~~xml
  主要体现：1、增加一个任务分配器，硬件网络设备（F5、交换机）或者负载均衡软件（Nginx等）
  		2、任务分配器和真正的业务服务器之间有连接和交互
  		3、任务分配器需要增加分配算法。例如，是采用轮询算法，还是按权重分配，又或者按照负载进行分配。
  ~~~

  任务分解方式：把原来大一统但复杂的业务系统，拆分成小而简单但需要多个系统配合的业务系统。

  ~~~xml
  简单的系统更加容易做到高性能
  可以针对单个任务进行扩展
  ~~~

  > 垂直维度可包括以下措施：
  > 		增大内存减少I/O操作
  > 		更换为固态硬盘（SSD）提升I/O访问速度
  > 		使用RAID增加I/O吞吐能力
  > 		置换服务器获得更多的处理器或分配更多的虚拟核
  > 		升级网络接口或增加网络接口
  > 水平维度可包括以下措施：
  > 		功能分解：基于功能将系统分解为更小的子系统
  > 		多实例副本：同一组件重复部署到多台不同的服务器
  > 		数据分割：在每台机器上都只部署一部分数据

垂直维度方案比较适合业务阶段早期和成本可接受的阶段，该方案是提升性能最简单直接的方式，但是受成本与硬件能力天花板的限制。

水平维度方案所带来的好处要在业务发展的后期才能体现出来。起初，该方案会花费更多的硬件成本，另外一方面对技术团队也提出了更高的要求；但是，没有垂直方案的天花板问题。

一旦达到一定的业务阶段，水平维度是技术发展的必由之路。因此，作为技术部门，需要提前布局 ，未雨绸缪，不要被业务抛的太远。

## 高可用

